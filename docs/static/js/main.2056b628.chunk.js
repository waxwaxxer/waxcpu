(this.webpackJsonpcpu=this.webpackJsonpcpu||[]).push([[0],{201:function(e,t,n){},202:function(e,t,n){},220:function(e,t){},222:function(e,t){},232:function(e,t){},234:function(e,t){},261:function(e,t){},263:function(e,t){},264:function(e,t){},269:function(e,t){},271:function(e,t){},277:function(e,t){},279:function(e,t){},292:function(e,t){},304:function(e,t){},307:function(e,t){},384:function(e,t){},385:function(e,t){},413:function(e,t,n){"use strict";n.r(t);var r=n(13),c=n.n(r),a=n(106),o=n.n(a),s=(n(201),n(202),n(24)),i=n(75),u=n(6),l=n.n(u),f=n(9),p=n(43),b=(n(36),n(19)),d=n(76),h=n.n(d),v=n(34),j=(n(107),function(e){var t=function(){for(var e=new Uint8Array(8),t=0;t<8;t++){var n=parseInt(Math.floor(255*Math.random()));e[t]=n}return e}();return e.pushArray(t),t}),x=function(){var e=Object(f.a)(l.a.mark((function e(t,n,r){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get_table_rows({code:t,scope:t,table:"miners",lower_bound:n,upper_bound:n});case 2:return c=e.sent,a="0000000000000000000000000000000000000000000000000000000000000000",c.rows.length&&(a=c.rows[0].last_mine_tx),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var e=Object(f.a)(l.a.mark((function e(t,n,r,c){var a,o,s,i,u,f,d,x,m,g,O,w,U;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,o=0,s=0,0,console.log(c),c){e.next=5;break}return console.error("Please provide last mine tx"),e.abrupt("return");case 5:for(c=c.substr(0,16),x=b.Buffer.from(c,"hex"),m=".wam"===n.substr(-4),console.log("Performing work with difficulty ".concat(r,", last tx is ").concat(c,"...")),m&&console.log("Using WAM account"),g=(new Date).getTime();!a;)(u=new p.Serialize.SerialBuffer({textEncoder:new v.TextEncoder,textDecoder:new v.TextDecoder})).pushName(n),u.pushArray(Array.from(x)),d=j(u),(i=h.a.createHash("sha256")).update(u.array.slice(0,24)),f=i.digest("hex"),(a=m?"0000"===f.substr(0,4):"000000"===f.substr(0,6))&&(o=m?parseInt(f.substr(4,1),16):parseInt(f.substr(6,1),16),a&=o<=r),++s%5e7===0&&console.log("Still mining - tried ".concat(s," iterations"));return O=(new Date).getTime(),w=Array.from(d).map((function(e){return("0"+e.toString(16)).slice(-2)})).join(""),console.log("Found hash in ".concat(s," iterations with ").concat(n," ").concat(w,", last = ").concat(o,", hex_digest ").concat(f," taking ").concat((O-g)/1e3,"s")),U={account:n,rand_str:w,hex_digest:f},e.abrupt("return",U);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}();var g=n(17),O=new p.JsonRpc("https://wax.greymass.com",{fetch:fetch}),w=function(e){var t=e.ual,n=function(){var e=Object(f.a)(l.a.mark((function e(){var n,r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("m.federation",t.activeUser.accountName,O);case 3:return n=e.sent,e.next=6,m("m.federation",t.activeUser.accountName,0,n);case 6:return r=e.sent,c={actions:[{account:"m.federation",name:"mine",authorization:[{actor:t.activeUser.accountName,permission:"active"}],data:{miner:t.activeUser.accountName,nonce:r}}]},e.next=10,t.activeUser.signTransaction(c,{blocksBehind:5,expireSeconds:300,broadcast:!0,sign:!0});case 10:a=e.sent,console.log(a),alert("Transaction ID: "+a.transactionId),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),alert(e.t0),console.log(JSON.stringify(e.t0));case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),c="Start",a=Object(i.a)({},c,n),o=Object(r.useState)(),u=Object(s.a)(o,2),p=u[0],b=u[1],d=Object(r.useState)(c),h=Object(s.a)(d,2),v=h[0];h[1];Object(r.useEffect)((function(){var e=function(){var e=Object(f.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.activeUser){e.next=12;break}return e.prev=1,e.next=4,O.get_account(t.activeUser.accountName);case 4:n=e.sent,b(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),console.log(JSON.stringify(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[t.activeUser]);var j=function(){t.activeUser||t.showModal()};return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"CPU"}),t.activeUser&&t.activeUser&&p?Object(g.jsxs)("div",{children:[t.activeUser.accountName," ",Object(g.jsx)("br",{})]}):null,t.activeUser?function(){if(t.activeUser&&t.activeAuthenticator)return Object(g.jsxs)("div",{children:[Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:t.logout,children:"Logout"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{})]})}():Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:j,children:"Login"}),Object(g.jsx)("br",{})]}),t.activeUser?Object(g.jsx)("div",{children:Object(g.jsx)("button",{onClick:function(){return a[v].call()},children:v})}):null]})};var U=function(e){var t=e.ual;return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(w,{ual:t})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,415)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))},y=n(108),N=n(191),S=n(194),A={chainId:"1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4",rpcEndpoints:[{protocol:"https",host:"wax.greymass.com",port:"443"}]},_=new N.Anchor([A],{appName:"cpu"}),I=new S.Wax([A],{appName:"cpu"}),T=Object(y.withUAL)(U);o.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(y.UALProvider,{chains:[A],authenticators:[_,I],appName:"cpu",children:Object(g.jsx)(T,{})})}),document.getElementById("root")),k()}},[[413,1,2]]]);
//# sourceMappingURL=main.2056b628.chunk.js.map