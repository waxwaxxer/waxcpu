(this.webpackJsonpcpu=this.webpackJsonpcpu||[]).push([[0],{201:function(t,e,n){},202:function(t,e,n){},220:function(t,e){},222:function(t,e){},232:function(t,e){},234:function(t,e){},261:function(t,e){},263:function(t,e){},264:function(t,e){},269:function(t,e){},271:function(t,e){},277:function(t,e){},279:function(t,e){},292:function(t,e){},304:function(t,e){},307:function(t,e){},384:function(t,e){},385:function(t,e){},413:function(t,e,n){"use strict";n.r(e);var r=n(13),c=n.n(r),a=n(106),o=n.n(a),i=(n(201),n(202),n(24)),s=n(75),u=n(6),f=n.n(u),l=n(9),p=n(43),b=(n(36),n(19)),d=n(76),h=n.n(d),v=n(34),j=(n(107),function(t){var e=function(){for(var t=new Uint8Array(8),e=0;e<8;e++){var n=parseInt(Math.floor(255*Math.random()));t[e]=n}return t}();return t.pushArray(e),e}),x=function(){var t=Object(l.a)(f.a.mark((function t(e,n,r){var c,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get_table_rows({code:e,scope:e,table:"miners",lower_bound:n,upper_bound:n});case 2:return c=t.sent,a="0000000000000000000000000000000000000000000000000000000000000000",c.rows.length&&(a=c.rows[0].last_mine_tx),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),m=function(){var t=Object(l.a)(f.a.mark((function t(e){var n,r,c,a,o,i,s,u,l,d,x,m,g,O,w,U;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.mining_account,n=e.account,r=e.difficulty,c=e.last_mine_tx,a=!1,o=0,i=0,0,c){t.next=5;break}return console.error("Please provide last mine tx"),t.abrupt("return");case 5:for(c=c.substr(0,16),x=b.Buffer.from(c,"hex"),m=".wam"===n.substr(-4),console.log("Performing work with difficulty ".concat(r,", last tx is ").concat(c,"...")),m&&console.log("Using WAM account"),g=(new Date).getTime();!a;)(u=new p.Serialize.SerialBuffer({textEncoder:new v.TextEncoder,textDecoder:new v.TextDecoder})).pushName(n),u.pushArray(Array.from(x)),d=j(u),(s=h.a.createHash("sha256")).update(u.array.slice(0,24)),l=s.digest("hex"),(a=m?"0000"===l.substr(0,4):"000000"===l.substr(0,6))&&(o=m?parseInt(l.substr(4,1),16):parseInt(l.substr(6,1),16),a&=o<=r),++i%5e7===0&&console.log("Still mining - tried ".concat(i," iterations"));return O=(new Date).getTime(),w=Array.from(d).map((function(t){return("0"+t.toString(16)).slice(-2)})).join(""),console.log("Found hash in ".concat(i," iterations with ").concat(n," ").concat(w,", last = ").concat(o,", hex_digest ").concat(l," taking ").concat((O-g)/1e3,"s")),U={account:n,rand_str:w,hex_digest:l},t.abrupt("return",U);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var g=n(17),O=new p.JsonRpc("https://wax.greymass.com",{fetch:fetch}),w=function(t){var e=t.ual,n=function(){var t=Object(l.a)(f.a.mark((function t(){var n,r,c,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x("m.federation",e.activeUser.accountName,O);case 3:return n=t.sent,t.next=6,m("m.federation",e.activeUser.accountName,0,n);case 6:return r=t.sent,c={actions:[{account:"m.federation",name:"mine",authorization:[{actor:e.activeUser.accountName,permission:"active"}],data:{miner:e.activeUser.accountName,nonce:r}}]},t.next=10,e.activeUser.signTransaction(c,{blocksBehind:5,expireSeconds:300,broadcast:!0,sign:!0});case 10:a=t.sent,console.log(a),alert("Transaction ID: "+a.transactionId),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),console.error(t.t0),alert(t.t0),console.log(JSON.stringify(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),c="Start",a=Object(s.a)({},c,n),o=Object(r.useState)(),u=Object(i.a)(o,2),p=u[0],b=u[1],d=Object(r.useState)(c),h=Object(i.a)(d,2),v=h[0];h[1];Object(r.useEffect)((function(){var t=function(){var t=Object(l.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.activeUser){t.next=12;break}return t.prev=1,t.next=4,O.get_account(e.activeUser.accountName);case 4:n=t.sent,b(n),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0),console.log(JSON.stringify(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();t()}),[e.activeUser]);var j=function(){e.activeUser||e.showModal()};return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"CPU"}),e.activeUser&&e.activeUser&&p?Object(g.jsxs)("div",{children:[e.activeUser.accountName," ",Object(g.jsx)("br",{})]}):null,e.activeUser?function(){if(e.activeUser&&e.activeAuthenticator)return Object(g.jsxs)("div",{children:[Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:e.logout,children:"Logout"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{})]})}():Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:j,children:"Login"}),Object(g.jsx)("br",{})]}),e.activeUser?Object(g.jsx)("div",{children:Object(g.jsx)("button",{onClick:function(){return a[v].call()},children:v})}):null]})};var U=function(t){var e=t.ual;return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(w,{ual:e})})},y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,415)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),r(t),c(t),a(t),o(t)}))},k=n(108),N=n(191),_=n(194),S={chainId:"1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4",rpcEndpoints:[{protocol:"https",host:"wax.greymass.com",port:"443"}]},A=new N.Anchor([S],{appName:"cpu"}),I=new _.Wax([S],{appName:"cpu"}),T=Object(k.withUAL)(U);o.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(k.UALProvider,{chains:[S],authenticators:[A,I],appName:"cpu",children:Object(g.jsx)(T,{})})}),document.getElementById("root")),y()}},[[413,1,2]]]);
//# sourceMappingURL=main.2649b4f5.chunk.js.map